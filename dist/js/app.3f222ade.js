(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)i=o[d],r[i]&&p.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"layout-main"},[a("div",{staticClass:"layout-main__header"},[a("HeaderMain")],1),a("div",{staticClass:"layout-main__content"},[a("router-view",{staticClass:"layout-main__page-content"})],1)])])},s=[],i=(a("752f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header-main"},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light header-main__nav"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[a("img",{attrs:{src:"/logo.svg",alt:"Yandex Disk"}}),t._v(" Яндекс Диск\n    ")])],1)])}),o=[],c={name:"HeaderMain"},l=c,u=a("2877"),d=Object(u["a"])(l,i,o,!1,null,null,null),p=d.exports,f={name:"app",components:{HeaderMain:p}},h=f,b=Object(u["a"])(h,r,s,!1,null,null,null),v=b.exports,m=a("8c4f"),_=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"page-main"},[e.data?e._e():n("div",{staticClass:"d-flex justify-content-center"},[n("a",{staticClass:"btn btn-success m-5",attrs:{href:"https://oauth.yandex.ru/authorize?response_type=token&client_id=d11e9e49b8944a9d84ac5ab58e1d41d0"}},[e._v("\n      First, authenticate.\n    ")])]),e.data?n("div",{staticClass:"container page-main__container"},[n("FilesNav"),n("FilesTable",{staticClass:"page-main__files-table",attrs:{data:e.data,loaded:e.$async.loadFilesList.$pending},on:{"open-folder":function(e){t.$router.push(e)}}})],1):e._e()])},y=[],g=a("cebc"),k=a("2f62"),x=a("bc3a"),C=a.n(x),O=a("4328"),$=a.n(O),w="https://cloud-api.yandex.net:443/v1/disk/resources";function j(t,e){var a=$.a.stringify({path:t}),n="".concat(w,"?").concat(a);return C.a.get(n,{headers:{Authorization:e}}).then(function(t){return Promise.resolve(t.data)})}var T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navigation no-margin",attrs:{"aria-label":"breadcrumb"}},[a("button",{staticClass:"btn btn-primary navigation__btn-back",attrs:{type:"button"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("\n    Back\n  ")]),a("ol",{staticClass:"breadcrumb"},t._l(t.breadcrumbsList,function(e,n){return a("li",{key:n,staticClass:"breadcrumb-item",class:[n===t.breadcrumbsList.length-1?"active":""],attrs:{"aria-current":[n===t.breadcrumbsList.length-1?"page":""]}},[n!==t.breadcrumbsList.length-1?a("router-link",{attrs:{to:t.createBreadcrumbsLink(n)}},[t._v("\n        "+t._s(e)+"\n      ")]):a("span",[t._v(t._s(e))])],1)}),0)])},B=[],F=(a("28a5"),{name:"FilesNav",computed:{breadcrumbsList:function(){var t;return t="/"===this.$route.path?[]:this.$route.path.split(/\//),t[0]="Home",t}},methods:{createBreadcrumbsLink:function(t){return 0===t?"/":"/".concat(this.breadcrumbsList.slice(1,t+1).join("/"))}}}),L=F,M=Object(u["a"])(L,T,B,!1,null,null,null),S=M.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"files-table"},[t.loaded?a("div",{staticClass:"files-table__loader"},[t._m(0)]):a("table",{staticClass:"table table-hover table-centered"},[t._m(1),a("tbody",t._l(this.data,function(e,n){return a("tr",t._g({key:e.resource_id},"dir"===e.type?{click:function(){t.openFolder(e.path)}}:{}),[a("td",[t._v(t._s(n+1))]),a("td",[a("span",{staticClass:"file__icon",style:{backgroundImage:"url("+t.defineIcon(e)+")"}})]),a("td",[t._v(t._s(e.name))]),a("td",["file"===e.type?a("span",[t._v(t._s(t.formatBytes(e.size)))]):t._e()])])}),0)])])},P=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{staticStyle:{width:"60px"},attrs:{scope:"col"}},[t._v("\n          #\n        ")]),a("th",{staticStyle:{width:"60px"},attrs:{scope:"col"}}),a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{staticStyle:{width:"120px"},attrs:{scope:"col"}},[t._v("\n          Size\n        ")])])])}],E=(a("a481"),{name:"FilesTable",props:{data:{type:Array,required:!0},loaded:{type:Boolean,default:!1}},methods:{formatBytes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===t)return"0 Bytes";var a=1024,n=e<0?0:e,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,s)).toFixed(n))+" "+r[s]},defineIcon:function(t){var e={compressed:"archive",web:"code",development:"code",executable:"exe"};return"dir"===t.type?"/file-icons/folder.png":t.preview?t.preview:e[t.media_type]?"/file-icons/".concat(e[t.media_type],".png"):"/file-icons/file.png"},openFolder:function(t){this.$emit("open-folder",t.replace(/^disk:/,""))}}}),z=E,A=Object(u["a"])(z,I,P,!1,null,null,null),H=A.exports,N={name:"PageMain",components:{FilesNav:S,FilesTable:H},data:function(){return{data:null}},computed:Object(g["a"])({},Object(k["b"])(["token"])),methods:Object(g["a"])({},Object(k["c"])(["setTokenId"]),{getData:j,loadToken:function(){if(!this.authToken){var t=localStorage.getItem("yandex-disk-viewer-oauth-token");this.setTokenId(t)}}}),watch:{"$route.path":function(){var t=this;this.$async.loadFilesList.$perform().then(function(e){t.data=e._embedded.items})}},asyncOperations:{loadFilesList:function(){return this.getData(this.$route.path,this.token)}},created:function(){var t=this;this.loadToken(),this.authToken&&this.$async.loadFilesList.$perform().then(function(e){t.data=e._embedded.items})}},D=N,J=Object(u["a"])(D,_,y,!1,null,null,null),Y=J.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},G=[],K={name:"PageCallback",methods:Object(g["a"])({},Object(k["c"])(["setTokenId"])),mounted:function(){var t=this;this.$nextTick(function(){var e=/access_token=([^&]+)/.exec(document.location.hash)[1];localStorage.setItem("yandex-disk-viewer-oauth-token",e),t.setTokenId(e),t.$router.push("/")})}},Z=K,Q=Object(u["a"])(Z,q,G,!1,null,null,null),R=Q.exports;n["a"].use(m["a"]);var U=[{path:"/callback",component:R},{path:"*",component:Y}],V=new m["a"]({routes:U,mode:"history"}),W=V,X={authToken:""},tt={token:function(t){t.authToken="OAuth ".concat(t.tokenId)}},et={setTokenId:function(t,e){t.authToken="OAuth ".concat(e)}};n["a"].use(k["a"]);var at=new k["a"].Store({state:X,getters:tt,mutations:et}),nt=a("a7fe"),rt=a.n(nt),st=a("640b");a("ab8b");n["a"].use(rt.a,C.a),n["a"].use(st["default"]),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(v)},router:W,store:at}).$mount("#app")},"752f":function(t,e,a){}});
//# sourceMappingURL=app.3f222ade.js.map